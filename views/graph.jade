html
  head
    title!= title
    script(type='text/javascript', src='http://code.jquery.com/jquery-1.11.0.min.js')
    link(rel='stylesheet', href='https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css')
    script(type='text/javascript', src='https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js')
    script(type='text/javascript', src='http://code.createjs.com/easeljs-0.7.0.min.js')
    script(type='text/javascript', src='/js/common.js')
    script(type='text/javascript', src='/js/graphPage.js')

    style.
      .row > .btn { margin-top: 5px; margin-bottom: 5px; }

    script.
      var stage;
      var sourceVertex;
      var vertexes = [{"id":3,"name":"系统保留态3"},{"id":4,"name":"系统保留态4"},{"id":5,"name":"系统保留态5"},{"id":6,"name":"系统保留态6"},{"id":7,"name":"系统保留态7"},{"id":8,"name":"系统保留态8"},{"id":9,"name":"系统保留态9"},{"id":10,"name":"未命名态1"},{"id":11,"name":"未命名态2"},{"id":1,"name":"初始态"},{"id":2,"name":"终止态"}];
      var edges = [ {"source":1,"sink":10}, {"source":10,"sink":11}, {"source":11,"sink":2}, {"source":1,"sink":2} ];

      function init() {
        stage = new createjs.Stage("demoCanvas")
        stage.enableMouseOver();

        // sample vertex
        for(var i=0; i<vertexes.length; i++) {
          drawGraphVertex(vertexes[i].id, vertexes[i].name,
          {x:Math.random()*600,y:Math.random()*450});
        }

        // sample edge
        for(var i=0; i<edges.length; i++) {
          drawGraphEdge(edges[i].source, edges[i].sink);
        }

        // sample curve edge
        //drawingCanvas = new createjs.Shape();
        //stage.addChild(drawingCanvas);
        //drawingCanvas.graphics.setStrokeStyle(1).beginStroke(createjs.Graphics.getRGB(0,0,0));
        //drawingCanvas.graphics.moveTo(10, 210).quadraticCurveTo(50, 390, 90, 210);
        //drawArrow(Math.atan2((210 - 390), (90 - 50)), 90, 210);

        createjs.Ticker.on("tick", tick);
      }

      function tick() {
        stage.update();
      }

  body(onload="init();")
    div.container
      div.row
        button#preSave.btn.btn-default(data-target="#myModal", data-toggle="modal") Save
        button#editVertex.btn.btn-default Edit Vertex
        button#editEdge.btn.btn-default Edit Edge
      div.
        <!-- Button trigger modal -->
        <!-- button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">
          Launch demo modal
        </button -->

        <!-- Modal -->
        <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="myModalLabel">Confirm to save</h4>
              </div>
              <div class="modal-body">
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button id="save" type="button" class="btn btn-primary">Save changes</button>
              </div>
            </div>
          </div>
        </div>
      canvas#demoCanvas(width=1024, height=768)
